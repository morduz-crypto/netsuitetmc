<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Pantallas y vistas ¬∑ NetSuite TMC</title>

  <style>
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --border:rgba(15,23,42,.08);
      --accent:#2563eb;
      --accent2:#1d4ed8;
      --shadow: 0 10px 22px rgba(0,0,0,.04);

      --info-bg: rgba(37,99,235,.06);
      --info-bd: rgba(37,99,235,.18);

      --warn-bg: rgba(245, 158, 11, .12);
      --warn-bd: rgba(245, 158, 11, .35);

      --chip-bg: rgba(15,23,42,.03);
      --chip-bd: rgba(15,23,42,.10);
    }

    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    a{ color:var(--accent2); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .container{
      max-width:1100px;
      margin:0 auto;
      padding:44px 22px 56px;
    }

    /* ===== TOPBAR ===== */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .titleRow{
      display:flex;
      align-items:center;
      gap:14px;
      flex-wrap:wrap;
      min-width: 260px;
    }
    h1{
      font-size:30px;
      font-weight:900;
      letter-spacing:-.02em;
      margin:0;
      line-height:1.1;
    }

    .topActions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .transfRow{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap:16px;
  align-items:center;
  background:#fff;
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  margin-top:12px;
}

.transfRow img{
  width:100%;
  height:200px;
  object-fit:cover;
  border-radius:10px;
  background:#f1f5f9;
}

.transfRow h4{
  margin:0 0 6px;
  font-size:15px;
  font-weight:900;
}

.transfRow p{
  margin:0 0 6px;
  font-size:14px;
  line-height:1.6;
  color:#334155;
}

.transfRow .hint{
  font-size:12.5px;
  color:#64748b;
  font-weight:600;
}

/* Responsive */
@media (max-width: 860px){
  .transfRow{
    grid-template-columns: 1fr;
  }
  .transfRow img{
    height:180px;
  }
}

    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border:1px solid var(--border);
      background:var(--card);
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      color:var(--text);
      text-decoration:none;
      cursor:pointer;
      user-select:none;
      box-shadow:var(--shadow);
      white-space:nowrap;
    }
    .btn.primary{
      border-color: rgba(37,99,235,.25);
      color: var(--accent2);
      background: rgba(37,99,235,.06);
    }
    .pill{
      display:inline-flex;
      align-items:center;
      padding:10px 12px;
      border-radius:999px;
      background:rgba(37,99,235,.08);
      color:var(--accent2);
      border:1px solid rgba(37,99,235,.18);
      font-weight:900;
      font-size:12px;
      white-space:nowrap;
    }

    /* ===== CALLOUT (AZUL) ===== */
    .callout{
      background: var(--info-bg);
      border: 1px solid var(--info-bd);
      border-radius: 16px;
      padding: 14px 16px;
      box-shadow: 0 10px 22px rgba(0,0,0,.02);
      color:#334155;
      line-height:1.75;
      margin: 12px 0 14px;
    }
    .callout b{ color:var(--text); }
    .callout .mini{
      display:block;
      color:#64748b;
      font-weight:800;
      margin-top:6px;
      font-size:12px;
    }

    /* ===== TABS ===== */
    .tabs{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .tabBar{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      padding:12px;
      border-bottom:1px solid var(--border);
      background: rgba(15,23,42,.01);
    }
    .tabBtn{
      border:1px solid var(--border);
      background:#fff;
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      color:#0f172a;
      cursor:pointer;
      user-select:none;
      font-size:12.5px;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    .tabBtn.active{
      border-color: rgba(37,99,235,.25);
      background: rgba(37,99,235,.06);
      color: var(--accent2);
    }

    .tabPanel{ display:none; padding:16px 18px 18px; }
    .tabPanel.active{ display:block; }

    .panelTitle{
      margin:0 0 10px;
      font-size:16px;
      font-weight:900;
      letter-spacing:-.01em;
      color:var(--text);
    }
    .p{
      margin:0 0 10px;
      color:#334155;
      line-height:1.65;
      font-size:14px;
    }

    .placeholder{
      border:1px dashed rgba(15,23,42,.18);
      border-radius:16px;
      padding:14px 14px;
      background: rgba(255,255,255,.6);
      color:#475569;
      line-height:1.65;
      font-size:13.5px;
    }
    .placeholder b{ color:#0f172a; }

    /* ===== MEDIA (para Informes) ===== */
    .media{
      background:#fff;
      border:1px solid var(--border);
      border-radius:16px;
      overflow:hidden;
      box-shadow: 0 10px 22px rgba(0,0,0,.03);
    }
    .mediaTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      border-bottom:1px solid var(--border);
      background: rgba(15,23,42,.01);
      flex-wrap:wrap;
    }
    .mediaTop b{ font-weight:950; }
    .mediaTop .mini{
      color:#64748b;
      font-weight:900;
      font-size:12px;
    }
    .cap{
      padding:12px 14px 14px;
      color:#475569;
      line-height:1.65;
      font-size:13.5px;
    }
    .cap b{ color:#0f172a; }

    /* ===== Card simple ===== */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .cardBody{
      padding:14px 18px 18px;
      color:var(--muted);
      line-height:1.7;
      font-size:14px;
    }
    .list{
      margin:0 0 0 18px;
      padding:0;
      color:#334155;
      line-height:1.65;
    }
    .list li{ margin:7px 0; }

    /* ===== HOTSPOTS ===== */
    .shotWrap{
      position: relative;      /* CLAVE */
      overflow: hidden;        /* CLAVE: nada se sale */
      border-radius: 14px;
      border:1px solid rgba(15,23,42,.08);
      background:#0b1220;
    }
    .shotWrap img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      position:relative;
      z-index:1;
    }
    .toolbarWrap{
      background:#fff;
    }

    .hsDot{
      position:absolute;
      width:40px; height:40px;
      border-radius:999px;
      border:2px solid rgba(37,99,235,.75);
      background: rgba(255,255,255,.92);
      color:#1d4ed8;
      font-weight:950;
      display:grid;
      place-items:center;
      cursor:pointer;
      box-shadow: 0 14px 30px rgba(0,0,0,.25);
      transform: translate(-50%,-50%);
      user-select:none;
      z-index: 5;
      -webkit-tap-highlight-color: transparent;
    }
    .hsDot:hover{ transform: translate(-50%,-50%) scale(1.03); }
    .hsDot.small{ width:34px; height:34px; font-size:13px; }

    .hsTip{
      position:absolute;
      min-width: 260px;
      max-width: 340px;
      background: rgba(15,23,42,.92);
      color:#fff;
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;
      padding:12px 12px 10px;
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      display:none;
      z-index:10;
    }
    .hsTipTitle{
      font-weight:950;
      font-size:13.5px;
      letter-spacing:-.01em;
      margin-bottom:6px;
    }
    .hsTipText{
      font-size:12.8px;
      line-height:1.55;
      color: rgba(255,255,255,.92);
    }
    .hsTipHint{
      margin-top:8px;
      font-size:11.5px;
      color: rgba(255,255,255,.70);
      font-weight:800;
    }

    .small{
      font-size:12px;
      color:#64748b;
      margin-top:22px;
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- TOP -->
    <div class="topbar">
      <div class="titleRow">
        <h1>Pantallas y vistas</h1>
      </div>

      <div class="topActions">
        <a class="btn" href="index.html">‚Üê Volver al Home</a>
        <a class="btn" href="home_guia.html">‚Üê Anterior</a>
        <a class="btn primary" href="areas.html">Siguiente ‚Üí</a>
        <span class="pill">Secci√≥n 4 de 6</span>
      </div>
    </div>

    <!-- TODO dentro del callout azul (como pediste) -->
    <div class="callout">
      <p style="margin:0 0 10px;color:#334155;line-height:1.65;">
        Esta secci√≥n es para que no te pierdas.
        Aqu√≠ vas a aprender a reconocer si est√°s en un <b>formulario</b>, una <b>b√∫squeda</b>, un <b>informe</b>
        o si est√°s creando algo por <b>transformaci√≥n</b> (cuando un documento nace desde otro).
        No es un paso a paso: es una vista general para ubicarse r√°pido.
      </p>

      <p style="margin:0;color:#334155;line-height:1.65;">
        <b>Idea clave:</b> antes de hacer clic en Guardar, Editar o Crear‚Ä¶ primero identifica <b>d√≥nde est√°s</b>.
        <span class="mini">Si sabes reconocer la pantalla, evitas errores y avanzas m√°s r√°pido.</span>
      </p>
    </div>

    <div class="tabs">
      <div class="tabBar">
        <button class="tabBtn active" data-tab="tabForms">üßæ Formularios</button>
        <button class="tabBtn" data-tab="tabTransf">üîÑ Transformaciones</button>
        <button class="tabBtn" data-tab="tabReports">üìä Informes</button>
        <button class="tabBtn" data-tab="tabSearch">üîé B√∫squedas</button>
      </div>

      <!-- TAB 1 -->
      <section class="tabPanel active" id="tabForms">
        <h2 class="panelTitle">Formularios</h2>

        <div class="callout" style="margin-top:0;">
          <b>¬øC√≥mo funciona un formulario en NetSuite?</b><br/>
          En NetSuite, todo se maneja a trav√©s de formularios.
          No importa si est√°s creando un cliente, una cotizaci√≥n, una orden o un caso: siempre est√°s dentro de un formulario.
          Un formulario es simplemente la pantalla donde ves, editas o creas informaci√≥n.
        </div>

        <div class="placeholder">
          <b>En construcci√≥n:</b> aqu√≠ vamos a armar la secci√≥n de formularios completa (con el flujo y los demos pro).<br/>
          Lo haremos en este orden: <b>Tipos ‚Üí ¬øQu√© formulario es? ‚Üí Vista vs Edici√≥n ‚Üí Obligatorios ‚Üí Pesta√±as ‚Üí Grupos ‚Üí Alertas</b>.
        </div>
      </section>


      <!-- TAB 2: TRANSFORMACIONES -->
<section class="tabPanel" id="tabTransf">
  <h2 class="panelTitle">Transformaciones</h2>

<p class="p" style="margin-top:8px;">
  En NetSuite, una <b>transformaci√≥n</b> es cuando un documento genera otro para continuar el proceso.
  El nuevo documento queda conectado al anterior (trazabilidad).
  Al transformar, el sistema <b>hereda algunos campos</b> (cliente/proveedor, art√≠culos, cantidades, etc.),
  pero cada transacci√≥n tiene <b>campos propios</b> y obligatorios.
  <b>Recomendaci√≥n:</b> transforma para mantener trazabilidad, pero <b>revisa el formulario</b> y llena lo que haga falta en cada etapa.
</p>

  <!-- Ventas -->
  <div class="transfRow">
    <img src="img/transf_oportunidad_cotizacion.png" alt="Oportunidad a Cotizaci√≥n">
    <div>
      <h4>Oportunidad ‚Üí Cotizaci√≥n</h4>
      <p>
        Desde la <b>Oportunidad</b>, usa <b>Acciones (üìÑ)</b> o el bot√≥n visible y selecciona <b>Crear cotizaci√≥n</b>.
      </p>
      <span class="hint">Hereda cliente y contexto comercial. Revisa t√©rminos, vigencia, detalles de l√≠neas.</span>
    </div>
  </div>

  <div class="transfRow">
    <img src="img/transf_cotizacion_orden_venta.png" alt="Cotizaci√≥n a Orden de Venta">
    <div>
      <h4>Cotizaci√≥n ‚Üí Orden de Venta</h4>
      <p>
        En la <b>Cotizaci√≥n</b>, selecciona <b>Crear orden de venta</b> (bot√≥n o Acciones).
      </p>
      <span class="hint">Revisa direcci√≥n, condiciones, fechas y datos de log√≠stica si aplican.</span>
    </div>
  </div>

  <div class="transfRow">
    <img src="img/transf_orden_venta_factura.png" alt="Orden de Venta a Factura">
    <div>
      <h4>Orden de Venta ‚Üí Factura</h4>
      <p>
        Desde la <b>Orden de Venta</b>, usa el bot√≥n <b>Facturar</b> (o la opci√≥n equivalente).
      </p>
      <span class="hint">La factura puede requerir campos fiscales/contables propios (seg√∫n configuraci√≥n).</span>
    </div>
  </div>

  <!-- Compras -->
  <div class="transfRow">
    <img src="img/transf_orden_compra_recibo.png" alt="Orden de Compra a Recibo">
    <div>
      <h4>Orden de Compra ‚Üí Recibo (Item Receipt)</h4>
      <p>
        En la <b>Orden de Compra</b>, selecciona <b>Recibir</b> para registrar la entrada de inventario.
      </p>
      <span class="hint">Revisa cantidades recibidas, ubicaci√≥n y si hay backorders/pendientes.</span>
    </div>
  </div>

  <div class="transfRow">
    <img src="img/transf_oc_factura_proveedor.png" alt="Orden de compra a Factura proveedor">
    <div>
      <h4>Orden de Compra ‚Üí Factura proveedor (Vendor Bill)</h4>
      <p>
        En algunos casos, desde la <b>Orden de Compra</b> tambi√©n puedes <b>Crear factura proveedor</b>.
      </p>
      <span class="hint">Ojo: la factura tiene datos propios (cuentas, impuestos, fechas). Revisa antes de guardar.</span>
    </div>
  </div>

  <div class="transfRow">
    <img src="img/transf_recibo_factura_proveedor.png" alt="Recibo a Factura proveedor">
    <div>
      <h4>Recibo (Item Receipt) ‚Üí Factura proveedor (Vendor Bill)</h4>
      <p>
        Despu√©s de recibir, el siguiente paso t√≠pico es generar la <b>Factura proveedor</b> para registrar la compra contable.
      </p>
      <span class="hint">Hereda l√≠neas/cantidades, pero la factura exige campos contables propios.</span>
    </div>
  </div>

  <!-- Traslados -->
  <div class="transfRow">
    <img src="img/transf_orden_traslado.png" alt="Orden de Traslado">
    <div>
      <h4>Orden de Traslado ‚Üí Ejecuci√≥n / Recibo</h4>
      <p>
        La <b>Orden de Traslado</b> tiene acciones como <b>Ejecutar traslado</b> y <b>Recibir traslado</b>.
      </p>
      <span class="hint">Estos pasos confirman salida y entrada entre ubicaciones.</span>
    </div>
  </div>

</section>



      

      <!-- TAB 3: INFORMES (FUNCIONA + tooltip dentro de la imagen) -->
      <section class="tabPanel" id="tabReports">
        <h2 class="panelTitle">Informes</h2>

        <p class="p">
          Un <b>informe</b> es para analizar resultados (ventas, cartera, inventario, etc.).
          Se reconoce porque tiene <b>tabla de resultados</b>, <b>filtros</b> y un bot√≥n de <b>Actualizar</b>.
        </p>

        <!-- Imagen 1 -->
        <div class="media" style="margin-top:12px;">
          <div class="mediaTop">
            <b>Ejemplo real: Reporte en NetSuite</b>
            <span class="mini">toca los puntos</span>
          </div>

          <div class="shotWrap" style="aspect-ratio:16/9;">
            <!-- NOMBRES REALES -->
            <img src="imgreporte_inventario.png" alt="Reporte NetSuite - ejemplo"/>

            <button class="hsDot" data-title="‚ë† T√≠tulo del reporte"
              data-text="Indica qu√© informaci√≥n est√°s consultando."
              style="left:9%; top:8%;">1</button>

            <button class="hsDot" data-title="‚ë° Ver detalle / Ver resumen"
              data-text="Cambia el nivel de informaci√≥n (resumen vs detalle). No cambia los datos, solo la vista."
              style="left:20.5%; top:8.5%;">2</button>

            <button class="hsDot" data-title="‚ë¢ Tabla de resultados"
              data-text="Aqu√≠ ves la informaci√≥n del reporte. Es solo consulta: no modifica nada."
              style="left:16%; top:22%;">3</button>

            <button class="hsDot" data-title="‚ë£ Filtros (parte inferior)"
              data-text="Aqu√≠ defines qu√© quieres ver: fecha, subsidiaria, libro contable, etc."
              style="left:14%; top:90%;">4</button>

            <button class="hsDot" data-title="‚ë§ Bot√≥n ‚ÄúM√°s‚Äù"
              data-text="Hay m√°s filtros disponibles, pero est√°n ocultos."
              style="left:63%; top:90%;">5</button>

            <button class="hsDot" data-title="‚ë• Bot√≥n ‚ÄúActualizar‚Äù"
              data-text="Aplica los filtros. Si no haces clic aqu√≠, el reporte no cambia."
              style="left:3.8%; top:94.2%;">6</button>

            <!-- Tooltip √öNICO (se re-inserta dentro de cada imagen al abrir) -->
            <div class="hsTip" id="hsTipReports" aria-hidden="true">
              <div class="hsTipTitle" id="hsTipReportsTitle"></div>
              <div class="hsTipText" id="hsTipReportsText"></div>
              <div class="hsTipHint">Clic afuera o ESC para cerrar</div>
            </div>
          </div>

          <div class="cap">
            <b>Tip:</b> la mayor√≠a de errores en reportes pasa por esto: cambiar filtros y no dar <b>Actualizar</b>.
          </div>
        </div>

        <!-- Imagen 2: Toolbar -->
        <div class="media" style="margin-top:14px;">
          <div class="mediaTop">
            <b>Barra de acciones (Exportar)</b>
            <span class="mini">toca los puntos</span>
          </div>

          <div class="shotWrap toolbarWrap" style="aspect-ratio:16/3;">
            <!-- NOMBRE REAL -->
            <img
              src="imgreporte_toolbar.png"
              alt="Toolbar del reporte - exportar"
              style="object-fit:contain;background:#fff;"
            />

            <!-- Puntico 7 (AJUSTA left/top seg√∫n tu recorte) -->
            <button class="hsDot small" data-title="‚ë¶ Exportar"
              data-text="Descarga el reporte con los filtros aplicados (Excel o PDF)."
              style="left:78%; top:55%;">7</button>
          </div>

          <div class="cap">
            <b>Clave:</b> exporta despu√©s de filtrar y actualizar, as√≠ te baja el reporte correcto.
          </div>
        </div>

        <!-- Resumen -->
        <div class="card" style="margin-top:14px;">
          <div class="cardBody">
            <p class="p" style="margin-bottom:8px;"><b>¬øC√≥mo leer un reporte en NetSuite?</b></p>
            <ul class="list" style="margin-top:0;">
              <li><b>‚ë† T√≠tulo:</b> qu√© est√°s consultando.</li>
              <li><b>‚ë° Detalle / Resumen:</b> cambia la vista, no los datos.</li>
              <li><b>‚ë¢ Tabla:</b> solo consulta.</li>
              <li><b>‚ë£ Filtros:</b> define el alcance.</li>
              <li><b>‚ë§ M√°s:</b> filtros ocultos.</li>
              <li><b>‚ë• Actualizar:</b> aplica filtros.</li>
              <li><b>‚ë¶ Exportar:</b> baja Excel/PDF con filtros.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- TAB 4 -->
<section class="tabPanel" id="tabSearch">
  <h2 class="panelTitle">B√∫squedas</h2>

  <p class="p">
    Una <b>b√∫squeda guardada</b> es una <b>lista inteligente</b> que NetSuite arma con tus reglas.
    T√∫ defines <b>qu√© quieres encontrar</b> (criterios) y <b>qu√© quieres ver</b> (columnas),
    y el sistema te devuelve los <b>registros exactos</b> que cumplen eso.
  </p>

  <p class="p" style="margin-top:-2px;">
    Se usa para <b>monitorear pendientes</b>, <b>priorizar trabajo</b>, <b>exportar</b> informaci√≥n y
    (seg√∫n permisos/configuraci√≥n) <b>compartir</b> vistas o <b>enviar resultados</b> por correo.
  </p>

  <p class="p">
    <b>Diferencia clave:</b>
    informe = an√°lisis ¬∑ b√∫squeda = trabajo operativo.
  </p>

  <!-- Imagen con hotspots -->
  <div class="media" style="margin-top:12px;">
    <div class="mediaTop">
      <b>Ejemplo real: B√∫squeda en NetSuite</b>
      <span class="mini">toca los puntos</span>
    </div>

    <div class="shotWrap" style="aspect-ratio:16/9;">
      <img
        src="imgbusqueda_cotizaciones.png"
        alt="B√∫squeda NetSuite - Cotizaciones"
      />

      <button class="hsDot" style="left:10%;top:9%;" data-title="‚ë† T√≠tulo de la b√∫squeda"
        data-text="Indica qu√© tipo de registros est√°s viendo.">1</button>

      <button class="hsDot" style="left:18%;top:14%;" data-title="‚ë° Volver a criterios"
        data-text="Permite cambiar filtros o condiciones (seg√∫n permisos).">2</button>

      <button class="hsDot" style="left:8%;top:22%;" data-title="‚ë¢ Filtros"
        data-text="Definen qu√© registros aparecen en la lista.">3</button>

      <button class="hsDot" style="left:6%;top:38%;" data-title="‚ë£ Editar / Ver"
        data-text="Desde aqu√≠ entras directamente al registro.">4</button>

      <button class="hsDot" style="left:45%;top:45%;" data-title="‚ë§ Tabla de resultados"
        data-text="Cada fila es un registro real del sistema.">5</button>

      <button class="hsDot" style="left:92%;top:18%;" data-title="‚ë• Exportar"
        data-text="Descarga la lista en Excel o PDF.">6</button>

      <!-- tooltip reutiliza el mismo script de Informes -->
      <div class="hsTip" id="hsTipSearch"></div>
    </div>
  </div>
</section>

    </div>

    <div class="small">Gu√≠a interna ¬∑ Tecnolog√≠as M√©dicas Colombia (TMC)</div>
  </div>

  <script>
    // Tabs
    document.querySelectorAll('.tabBtn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const target = btn.dataset.tab;
        document.querySelectorAll('.tabBtn').forEach(b=>b.classList.remove('active'));
        document.querySelectorAll('.tabPanel').forEach(p=>p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(target).classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // Hotspots (solo dentro de Informes)
    (function(){
      const tab = document.getElementById('tabReports');
      if(!tab) return;

      const tip = document.getElementById('hsTipReports');
      const tipTitle = document.getElementById('hsTipReportsTitle');
      const tipText  = document.getElementById('hsTipReportsText');

      function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

      function openTip(btn){
        const wrap = btn.closest('.shotWrap');
        if(!wrap) return;

        // CLAVE: el tooltip vive dentro del mismo wrap (imagen) del puntico
        if(tip.parentElement !== wrap) wrap.appendChild(tip);

        tipTitle.textContent = btn.getAttribute('data-title') || '';
        tipText.textContent  = btn.getAttribute('data-text')  || '';
        tip.style.display = 'block';
        tip.setAttribute('aria-hidden','false');

        const wr = wrap.getBoundingClientRect();
        const br = btn.getBoundingClientRect();

        const x = (br.left - wr.left) + br.width/2;
        const y = (br.top  - wr.top ) + br.height/2;

        // Medimos tip
        tip.style.left = '10px';
        tip.style.top  = '10px';
        const tr = tip.getBoundingClientRect();

        // Preferimos derecha del punto
        let left = x + 14;
        let top  = y - (tr.height/2);

        // Si se sale por la derecha, lo ponemos a la izquierda
        if(left + tr.width > wr.width - 10){
          left = x - tr.width - 14;
        }

        // Clamp para que SIEMPRE quede dentro de la imagen
        left = clamp(left, 10, wr.width  - tr.width  - 10);
        top  = clamp(top,  10, wr.height - tr.height - 10);

        tip.style.left = left + 'px';
        tip.style.top  = top  + 'px';
      }

      function closeTip(){
        tip.style.display = 'none';
        tip.setAttribute('aria-hidden','true');
      }

      tab.querySelectorAll('.hsDot').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          e.stopPropagation();
          openTip(btn);
        });
      });

      document.addEventListener('click', (e)=>{
        if(tip.style.display === 'block'){
          if(e.target.closest('#hsTipReports')) return;
          closeTip();
        }
      });

      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape') closeTip();
      });
    })();
  </script>
</body>
</html>
